# Android IM迁移

# Tencent已知存在的问题 sdk问题
## 登录Id问题
当前版本为```4.4.479```：退出登录时```TIMManager.getInstance().loginUser```不会置空，所有不能用来做为是否登录判断，现在是自己维护的登录态```IMLogin``` 

## 视频消息  
1. 旧版本获取不到新版本的视频缩略图，sdk新旧版暂时未兼容
2. 视频文件大小不对，sdk目前阶段文件大小都是0

## 离线推送
1. sdk需要集成各大手机厂商的sdk才能实现离线推送，且都需要申请各种第三方id，暂时未加离线推送 
``` TIMManager.getInstance().setOfflinePushListener ```

## 删除消息，消息漫游
1. 删除本地消息的情况下，C2C 会话将无法获取到删除会话前的历史消息。
2. 删除本地消息的情况下，群组会话通过 getMessage 仍然会拉取到漫游消息，所以存在删除消息成功，但是拉取消息的时候仍然获取到删除会话前的历史消息的情况，取决于是否重新从漫游拉回到本地。如果不需要拉取漫游，可以通过 getLocalMessage 获取消息，或者只通过 getMessage 拉取指定条数（如未读条数数量）的消息。

## 撤回消息，不支持漫游

# 新版本解决的问题
1. 兼容9.0手机的系统 
2. 解决了老版本漫游消息丢失严重
3. 新增了消息撤回功能，（以前是我们自己自定义的），现在sdk支持
